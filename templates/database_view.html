{% extends "base.html" %}
{% block content %}

<div class="container mt-4">

    <h2>Database Overview</h2>
    <p class="text-muted">Debug view of TaskDefs, TaskStages and Agent Pipelines.</p>

    <hr>

    <h4>Task Definitions (Operations)</h4>
    <table class="table table-dark table-hover">
        <tr>
            <th>ID</th>
            <th>Operation Name</th>
            <th>Description</th>
        </tr>
        {% for t in taskdefs %}
        <tr>
            <td>{{ t.TaskDef_ID }}</td>
            <td>{{ t.TaskDef_Name }}</td>
            <td>{{ t.TaskDef_Description }}</td>
        </tr>
        {% endfor %}
    </table>


    <h4>Task Stage Definitions (Workflow Steps)</h4>
    <table class="table table-dark table-hover">
        <tr>
            <th>ID</th>
            <th>Operation (TaskDef_ID FK)</th>
            <th>Stage Type</th>
            <th>Stage Description</th>
        </tr>
        {% for s in taskstages %}
        <tr>
            <td>{{ s.TaskStageDef_ID }}</td>
            <td>{{ s.TaskDef_ID_FK }}</td>
            <td>{{ s.TaskStageDef_Type }}</td>
            <td>{{ s.TaskStageDef_Description }}</td>
        </tr>
        {% endfor %}
    </table>


    <h4>Agent Pipelines (Saved Pipelines)</h4>
    <table class="table table-dark table-hover">
        <tr>
            <th>Input ID</th>
            <th>User ID</th>
            <th>Agent Name</th>
            <th>Instructions</th>
            <th>File Text (Preview)</th>
            <th>Operation</th>
            <th>Directory Path</th>
            <th>Created At</th>
        </tr>
        {% for p in pipelines %}
        <tr>
            <td>{{ p.Input_ID }}</td>
            <td>{{ p.User_ID }}</td>
            <td>{{ p.Agent_Name }}</td>
            <td>{{ p.Text_Input }}</td>
            <td>{{ p.File_Text }}</td>
            <td>{{ p.Operation_Selected }}</td>
            <td>{{ p.Directory_Path }}</td>
            <td>{{ p.Created_At }}</td>
        </tr>
        {% endfor %}
    </table>

</div>

{% endblock %}
