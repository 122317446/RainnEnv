{% extends "base.html" %}

{% block content %}

<!-- ======================================================
 Update Agent Process
 Allows user to modify an existing agent’s name and
 update the operation (TaskDef) associated with it.
====================================================== -->
<div class="container mt-4">

    <h2>Update Agent Process</h2>

    <!-- Form submits updated fields to backend -->
    <form method="POST">

        <!-- ===============================
             Agent Name Field
             Pre-filled with the current value.
        =============================== -->
        <div class="mb-3">
            <label class="form-label">Agent Name</label>
            <input type="text"
                   name="agent_name"
                   class="form-control"
                   value="{{ process.Agent_Name }}">
        </div>

        <!-- ===============================
             Operation Dropdown
             Jinja loop renders all TaskDefs.
             Selected option is matched to the
             current process’ Operation_Selected.
        =============================== -->
        <div class="mb-3">
            <label class="form-label">Update Operation</label>
            <select class="form-select" name="operation_selected">
                {% for td in taskdefs %}
                <option value="{{ td.TaskDef_ID }}"
                        {% if td.TaskDef_ID == process.Operation_Selected %} selected {% endif %}>
                    {{ td.TaskDef_Name }}
                </option>
                {% endfor %}
            </select>
        </div>

        <!-- Save button -->
        <button class="btn btn-success mt-2">Save Changes</button>

    </form>

</div>

{% endblock %}
